node('node1')
{
    stage('vcs')
    {
        git url:'https://github.com/jayainjeti/spring-petclinic.git',
            branch: 'scripted'
    }
    stage('build') 
    {
        sh 'export PATH="/usr/lib/jvm/java-1.17.0-openjdk-amd64/bin:$PATH" && ./mvnw package'

    }
    stage('postbuild')
    {
        archiveArtifacts onlyIfSuccessful: true,
            artifacts: '**/target/spring-petclinic-3.0.0-SNAPSHOT.jar',
            allowEmptyArchive: false
    }
    stage('show the test results') {
        junit testResults: '**/surefire-reports/TEST-*.xml',
              allowEmptyArchive: true
        
    }
}